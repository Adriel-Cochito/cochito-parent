# üöÄ Cochito Services - Sistema de Ordens de Servi√ßo

## üìã Vis√£o Geral

O **Cochito Services** √© um sistema modular de gerenciamento de ordens de servi√ßo desenvolvido com **Spring Framework** seguindo arquiteturas avan√ßadas de microsservi√ßos. O projeto implementa completamente as **Features 3 e 4** do curso de Arquiteturas Avan√ßadas de Software.

## üìö **Documenta√ß√£o e Testes**

### üîó **Swagger UI - Documenta√ß√£o Interativa**
```
üåê http://localhost:8080/swagger-ui.html
```
**Interface completa com todos os endpoints documentados, DTOs e exemplos de uso.**

### üìÆ **Postman Collection - Testes Prontos**
```
üîó https://api.postman.com/collections/33558167-802ea8c2-aeea-42c5-bcd2-81c4329b7c7b?access_key=PMAT-01K3Q35BC53066TFP2V3VFJRXT
```
**Collection completa com todos os endpoints testados e configurados.**

### üîê **Autentica√ß√£o JWT Obrigat√≥ria**
**‚ö†Ô∏è IMPORTANTE**: Para acessar os endpoints protegidos, √© necess√°rio fazer login primeiro:

#### **Credenciais de Teste:**
```json
// ADMIN (acesso total)
{
  "email": "joao.silva@email.com",
  "password": "admin123"
}

// USER (acesso limitado)
{
  "email": "ana.oliveira@email.com", 
  "password": "cliente123"
}
```

#### **Como Usar:**
1. **POST** `/api/auth/login` com as credenciais
2. **Copie o token JWT** da resposta
3. **Configure Authorization**: `Bearer SEU_TOKEN_AQUI`
4. **Use o token** nos demais endpoints

---

## üéØ **Features Implementadas**

### üéØ **Feature 3 - Microsservi√ßos e Spring Framework**
- **Arquitetura de Microsservi√ßos** com m√≥dulos independentes
- **Spring Cloud OpenFeign** para comunica√ß√£o entre servi√ßos  
- **Orquestra√ß√£o de APIs externas** em tempo real
- **Resili√™ncia e Fallback** com algoritmos alternativos
- **Response Enrichment** combinando dados de m√∫ltiplas fontes

### üéØ **Feature 4 - Seguran√ßa e Query Methods**
- **Spring Security** com autentica√ß√£o JWT
- **Controle de acesso** baseado em roles (ADMIN/USER)
- **Query Methods** avan√ßados com JPA
- **DTOs** para request/response (sem exposi√ß√£o de entidades)
- **Valida√ß√µes** robustas com Bean Validation

## üèóÔ∏è Arquitetura do Projeto

O projeto segue uma arquitetura de **microsservi√ßos modulares** organizados em:

```
cochito-parent/
‚îú‚îÄ‚îÄ üì¶ common-domain/          # Dom√≠nio compartilhado
‚îú‚îÄ‚îÄ üåê external-api/           # Clientes Feign para APIs externas  
‚îú‚îÄ‚îÄ üéØ main-app/               # Aplica√ß√£o principal
‚îî‚îÄ‚îÄ üìÑ pom.xml                 # Configura√ß√£o Maven multi-m√≥dulo
```

### üéØ **Main-App** - Aplica√ß√£o Principal

Cont√©m toda a l√≥gica de neg√≥cio, controllers REST, servi√ßos e persist√™ncia de dados:

- **Controllers**: Endpoints REST para CRUD e consultas avan√ßadas
- **Services**: L√≥gica de neg√≥cio e orquestra√ß√£o de servi√ßos
- **Repository**: Persist√™ncia JPA com Query Methods
- **DTOs**: Objetos de transfer√™ncia de dados
- **Loaders**: Carregamento inicial de dados (seeds)

### üåê **External-API** - M√≥dulo de Integra√ß√£o

M√≥dulo dedicado aos **Feign Clients** para comunica√ß√£o com APIs externas:

#### 1. **AwesomeCepFeignClient** 
```java
@FeignClient(name = "awesomeCepClient", url = "https://cep.awesomeapi.com.br")
public interface AwesomeCepFeignClient {
    @GetMapping("/json/{cep}")
    AwesomeCepResponse consultarCep(@PathVariable("cep") String cep);
}
```
**Funcionalidade**: Consulta dados de CEP (endere√ßo, coordenadas lat/lng, bairro, estado)

#### 2. **OpenRouteFeignClient**
```java
@FeignClient(name = "openRouteClient", url = "https://api.openrouteservice.org")
public interface OpenRouteFeignClient {
    @GetMapping("/v2/directions/driving-car")
    OpenRouteResponse calcularRota(@RequestParam("api_key") String apiKey, 
                                   @RequestParam("start") String origem,
                                   @RequestParam("end") String destino);
}
```
**Funcionalidade**: Calcula rota, dist√¢ncia e tempo de viagem entre dois pontos

### üì¶ **Common-Domain** - Dom√≠nio Compartilhado

Cont√©m entidades e objetos de dom√≠nio compartilhados entre os m√≥dulos.

---

## üéØ **FEATURE 4 - Implementa√ß√£o Completa**

### ‚úÖ **Requisitos da Feature 4 - TODOS IMPLEMENTADOS**

| **Requisito da Feature 4** | **Status** | **Implementa√ß√£o no Projeto** | **Localiza√ß√£o** |
|----------------------------|------------|-------------------------------|-----------------|
| **Spring Security com JWT** | ‚úÖ **ENTREGUE** | Autentica√ß√£o JWT completa | `SecurityConfig`, `JwtUtil`, `JwtAuthenticationFilter` |
| **Controle de Acesso (Roles)** | ‚úÖ **ENTREGUE** | ADMIN/USER com @PreAuthorize | Todos os controllers |
| **Query Methods Avan√ßados** | ‚úÖ **ENTREGUE** | 15+ m√©todos de consulta personalizados | `OrdemServicoRepository` |
| **DTOs Request/Response** | ‚úÖ **ENTREGUE** | Controllers n√£o exp√µem entidades | Todos os controllers refatorados |
| **Valida√ß√µes Bean Validation** | ‚úÖ **ENTREGUE** | @Valid, @NotNull, @Pattern, etc. | Todos os DTOs |
| **Swagger/OpenAPI** | ‚úÖ **ENTREGUE** | Documenta√ß√£o completa e p√∫blica | `http://localhost:8080/swagger-ui.html` |
| **Tratamento de Exce√ß√µes** | ‚úÖ **ENTREGUE** | GlobalExceptionHandler customizado | `GlobalExceptionHandler` |

### üîß **Detalhamento da Feature 4**

#### 1. **Spring Security + JWT**
```java
@Configuration
@EnableWebSecurity
@EnableMethodSecurity(prePostEnabled = true)
public class SecurityConfig {
    
    @Bean
    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
        http.csrf(csrf -> csrf.disable())
            .sessionManagement(session -> session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))
            .authorizeHttpRequests(authorize -> authorize
                .requestMatchers("/api/auth/login").permitAll()
                .requestMatchers("/swagger-ui/**").permitAll()  // Swagger p√∫blico
                .requestMatchers(HttpMethod.GET, "/api/**").hasAnyRole("ADMIN", "USER")
                .requestMatchers(HttpMethod.POST, "/api/**").hasRole("ADMIN")
                .requestMatchers(HttpMethod.PUT, "/api/**").hasRole("ADMIN")
                .requestMatchers(HttpMethod.DELETE, "/api/**").hasRole("ADMIN")
                .anyRequest().authenticated())
            .addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);
        return http.build();
    }
}
```

#### 2. **Query Methods Avan√ßados**
```java
@Repository
public interface OrdemServicoRepository extends JpaRepository<OrdemServico, Integer> {
    
    // Consultas por status
    List<OrdemServico> findByStatus(String status);
    Long countByStatus(String status);
    
    // Consultas por cliente
    List<OrdemServico> findByClienteIdAndStatus(Integer clienteId, String status);
    List<OrdemServico> findByClienteNomeContainingIgnoreCase(String nome);
    List<OrdemServico> findByClienteCpf(String cpf);
    
    // Consultas por funcion√°rio
    List<OrdemServico> findByFuncionarioIdAndStatus(Integer funcionarioId, String status);
    
    // Consultas por per√≠odo
    List<OrdemServico> findByDataCriacaoBetween(LocalDateTime inicio, LocalDateTime fim);
    List<OrdemServico> findByStatusAndDataCriacaoBetween(String status, LocalDateTime inicio, LocalDateTime fim);
    
    // Consultas por servi√ßo
    @Query("SELECT o FROM OrdemServico o JOIN o.itensServicos i JOIN i.servico s WHERE s.titulo LIKE %:titulo%")
    List<OrdemServico> findByServicoTituloContaining(@Param("titulo") String titulo);
}
```

#### 3. **DTOs Completos (Sem Exposi√ß√£o de Entidades)**

**Controllers Refatorados:**
- ‚úÖ `ClienteController` - usa `ClienteCreateRequestDTO`, `ClienteResponseDTO`, `ClienteFidelidadeRequestDTO`
- ‚úÖ `ServicoController` - usa `ServicoRequestDTO`, `ServicoResponseDTO`
- ‚úÖ `OrdemServicoController` - usa `OrdemServicoRequestDTO`, `OrdemServicoResponseDTO`

**Exemplo de DTO com Valida√ß√µes:**
```java
public class ClienteCreateRequestDTO {
    
    @NotBlank(message = "Nome √© obrigat√≥rio")
    @Size(min = 2, max = 100, message = "Nome deve ter entre 2 e 100 caracteres")
    private String nome;

    @NotBlank(message = "Email √© obrigat√≥rio")
    @Email(message = "Email deve ter um formato v√°lido")
    private String email;

    @NotBlank(message = "CPF √© obrigat√≥rio")
    @Pattern(regexp = "\\d{3}\\.\\d{3}\\.\\d{3}-\\d{2}", message = "CPF deve estar no formato XXX.XXX.XXX-XX")
    private String cpf;

    @Valid
    private EnderecoRequestDTO endereco;
    
    // getters/setters...
}
```

#### 4. **Controle de Acesso Granular**

**Roles Implementadas:**
- **ADMIN**: Acesso total (CRUD completo)
- **USER**: Apenas leitura (GET endpoints)

**Exemplos de Prote√ß√£o:**
```java
@RestController
@RequestMapping("/api/ordens-servico")
public class OrdemServicoController {
    
    @GetMapping
    @PreAuthorize("hasAnyRole('USER','ADMIN')")
    public List<OrdemServicoResponseDTO> obterOrdens() { ... }
    
    @PostMapping
    @PreAuthorize("hasRole('ADMIN')")
    public ResponseEntity<OrdemServicoResponseDTO> incluirOrdem(...) { ... }
    
    @DeleteMapping("/{id}")
    @PreAuthorize("hasRole('ADMIN')")
    public ResponseEntity<Void> excluirOrdem(@PathVariable Integer id) { ... }
}
```

#### 5. **Swagger Configurado e P√∫blico**

**Configura√ß√£o OpenAPI:**
```java
@Configuration
public class OpenApiConfig {
    
    @Bean
    public OpenAPI customOpenAPI() {
        return new OpenAPI()
                .info(new Info()
                        .title("Cochito Services API")
                        .description("API para gerenciamento de servi√ßos com autentica√ß√£o JWT")
                        .version("1.0.0"))
                .components(new Components()
                        .addSecuritySchemes("bearerAuth", new SecurityScheme()
                                .type(SecurityScheme.Type.HTTP)
                                .scheme("bearer")
                                .bearerFormat("JWT")))
                .addSecurityItem(new SecurityRequirement().addList("bearerAuth"));
    }
}
```

**Controllers com Documenta√ß√£o:**
```java
@RestController
@Tag(name = "1. Autentica√ß√£o", description = "Endpoints para autentica√ß√£o e informa√ß√µes da API")
public class ApiController {
    
    @PostMapping("/api/auth/login")
    @Operation(summary = "Realizar Login", description = "Autentica usu√°rio e retorna token JWT")
    public ResponseEntity<LoginResponseDTO> login(
        @io.swagger.v3.oas.annotations.parameters.RequestBody(
            examples = @ExampleObject(
                name = "Login Admin",
                value = "{\n  \"email\": \"joao.silva@email.com\",\n  \"password\": \"admin123\"\n}"
            )
        )
        @Valid @RequestBody LoginRequestDTO loginRequest) { ... }
}
```

---

## üéØ **FEATURE 3 - Implementa√ß√£o Completa**

### ‚úÖ **Requisitos da Feature 3 - TODOS IMPLEMENTADOS**

| **Requisito da Feature 3** | **Status** | **Implementa√ß√£o no Projeto** | **Localiza√ß√£o** |
|----------------------------|------------|-------------------------------|-----------------|
| **Arquitetura de Microsservi√ßos** | ‚úÖ **ENTREGUE** | Projeto modularizado em 3 m√≥dulos independentes | `common-domain/`, `external-api/`, `main-app/` |
| **Spring Cloud OpenFeign** | ‚úÖ **ENTREGUE** | 2 Feign Clients para APIs externas | `AwesomeCepFeignClient`, `OpenRouteFeignClient` |
| **Orquestra√ß√£o de Servi√ßos** | ‚úÖ **ENTREGUE** | DistanciaService orquestra 2 APIs + fallback | `DistanciaService.calcularDistancia()` |
| **Resili√™ncia e Fallback** | ‚úÖ **ENTREGUE** | Algoritmo Haversine como backup autom√°tico | `calcularDistanciaHaversine()` |
| **Configura√ß√£o Externa** | ‚úÖ **ENTREGUE** | URLs e API Keys externalizadas | `application.properties` |
| **Endpoints de Orquestra√ß√£o** | ‚úÖ **ENTREGUE** | Endpoint principal `/detalhado` | `GET /api/ordens-servico/{id}/detalhado` |
| **DTOs e Response Enrichment** | ‚úÖ **ENTREGUE** | DTOs enriquecidos com dados externos | `OrdemServicoResponseDTO` |
| **Tratamento de Erros** | ‚úÖ **ENTREGUE** | Try/catch com logs e fallbacks | Em todos os Feign Clients |

### üîß **Detalhamento da Implementa√ß√£o**

#### 1. **Servi√ßo de Dist√¢ncia - Orquestra√ß√£o Completa**

O `DistanciaService` demonstra perfeita orquestra√ß√£o de microsservi√ßos:

```java
@Service
public class DistanciaService {
    
    public DistanciaResponseDTO calcularDistancia(String cepOrigem, String cepDestino) {
        // 1Ô∏è‚É£ ORQUESTRA√á√ÉO: Consulta CEPs via AwesomeCep API
        AwesomeCepResponse origemResponse = awesomeCepFeignClient.consultarCep(cepOrigem);
        AwesomeCepResponse destinoResponse = awesomeCepFeignClient.consultarCep(cepDestino);
        
        try {
            // 2Ô∏è‚É£ ORQUESTRA√á√ÉO: Calcula rota via OpenRoute API
            OpenRouteResponse rotaResponse = openRouteFeignClient.calcularRota(
                apiKey, coordOrigem, coordDestino);
            // Processamento do resultado...
            
        } catch (Exception e) {
            // 3Ô∏è‚É£ RESILI√äNCIA: Fallback com algoritmo Haversine
            double distanciaKm = calcularDistanciaHaversine(lat1, lng1, lat2, lng2);
            // C√°lculo alternativo...
        }
    }
}
```

#### 2. **Response Principal - Ordem de Servi√ßo Completa**

**üîç Consulta Padr√£o** (`GET /api/ordens-servico/{id}`) - **SEM dados de dist√¢ncia**:
```json
{
    "id": 4,
    "funcionario": {
        "id": 2,
        "nome": "Maria Santos",
        "email": "maria.santos@email.com",
        "cpf": "98765432109",
        "telefone": "11888888888",
        "ativo": true,
        "endereco": {
            "id": 2,
            "cep": "38020-433",
            "logradouro": "Av. Paulista, 1000",
            "complemento": "Sala 200",
            "unidade": "",
            "bairro": "Santa Beatriz",
            "localidade": "Uberaba",
            "uf": "MG",
            "estado": "Uberaba"
        }
    },
    "cliente": {
        "id": 1,
        "nome": "Ana Oliveira",
        "email": "ana.oliveira@email.com",
        "cpf": "11122233344",
        "telefone": "11987654321",
        "fidelidade": "VIP",
        "endereco": {
            "id": 4,
            "cep": "38020-433",
            "logradouro": "Rua das Palmeiras, 456",
            "complemento": "Casa 2",
            "unidade": "",
            "bairro": "Santa Beatriz",
            "localidade": "Uberaba",
            "uf": "MG",
            "estado": "Uberaba"
        },
        "enderecoCompleto": "Rua das Palmeiras, 456, Santa Beatriz - Uberaba/MG - CEP: 38020-433"
    },
    "itensServicos": [
        {
            "id": 4,
            "servico": {
                "id": 6,
                "titulo": "Instala√ß√£o de Ar Condicionado",
                "preco": 350.00,
                "descricao": "Instala√ß√£o e configura√ß√£o de ar condicionado residencial"
            },
            "quantidade": 1
        }
    ],
    "dataCriacao": "2025-08-15T10:00:00",
    "dataExecucao": "2025-08-15T14:00:00",
    "status": "PENDENTE",
    "distancia": "0.0 km"
}
```

**üéØ Consulta Detalhada** (`GET /api/ordens-servico/{id}/detalhado`) - **üöÄ COM dados de dist√¢ncia via APIs externas (ORQUESTRA√á√ÉO FEATURE 3)**:
```json
{
    "id": 4,
    "funcionario": {
        "id": 2,
        "nome": "Maria Santos",
        "email": "maria.santos@email.com",
        "cpf": "98765432109",
        "telefone": "11888888888",
        "ativo": true,
        "endereco": {
            "id": 2,
            "cep": "38020-433",
            "logradouro": "Av. Paulista, 1000",
            "complemento": "Sala 200",
            "unidade": "",
            "bairro": "Santa Beatriz",
            "localidade": "Uberaba",
            "uf": "MG",
            "estado": "Uberaba"
        }
    },
    "cliente": {
        "id": 1,
        "nome": "Ana Oliveira",
        "email": "ana.oliveira@email.com",
        "cpf": "11122233344",
        "telefone": "11987654321",
        "fidelidade": "VIP",
        "endereco": {
            "id": 4,
            "cep": "38020-433",
            "logradouro": "Rua das Palmeiras, 456",
            "complemento": "Casa 2",
            "unidade": "",
            "bairro": "Santa Beatriz",
            "localidade": "Uberaba",
            "uf": "MG",
            "estado": "Uberaba"
        },
        "enderecoCompleto": "Rua das Palmeiras, 456, Santa Beatriz - Uberaba/MG - CEP: 38020-433"
    },
    "itensServicos": [
        {
            "id": 4,
            "servico": {
                "id": 6,
                "titulo": "Instala√ß√£o de Ar Condicionado",
                "preco": 350.00,
                "descricao": "Instala√ß√£o e configura√ß√£o de ar condicionado residencial"
            },
            "quantidade": 1
        }
    ],
    "dataCriacao": "2025-08-15T10:00:00",
    "dataExecucao": "2025-08-15T14:00:00",
    "status": "PENDENTE",
    "distancia": {
        "cepOrigem": "38081470",
        "cepDestino": "38067290", 
        "enderecoOrigem": "Avenida Francisco Jos√© de Carvalho",
        "bairroOrigem": "Parque do Mirante",
        "ufOrigem": "MG",
        "enderecoDestino": "Rua Rep√∫blica do Haiti",
        "bairroDestino": "Fabr√≠cio",
        "ufDestino": "MG",
        "distanciaKm": 6.58,
        "tempoMinutos": 10.57
    }
}
```

> **üí° Importante**: Os dados de dist√¢ncia calculados via **Feign Clients** (AwesomeCep + OpenRoute) **s√≥ s√£o inclu√≠dos na consulta detalhada** `/api/ordens-servico/{id}/detalhado`, demonstrando a orquestra√ß√£o de servi√ßos da Feature 3.

#### 3. **üéØ Endpoints - Diferencial da Feature 3**

| **Endpoint** | **Dados de Dist√¢ncia** | **Arquitetura** | **Uso** |
|--------------|------------------------|-----------------|---------|
| `GET /api/ordens-servico/{id}` | ‚ùå **String simples** (`"0.0 km"`) | **CRUD B√°sico** | Consulta padr√£o sem orquestra√ß√£o |
| `GET /api/ordens-servico/{id}/detalhado` | ‚úÖ **üöÄ Objeto completo** | **üéØ ORQUESTRA√á√ÉO FEATURE 3** | **Microsservi√ßos + Feign Clients** |

### üèÜ **DESTAQUE PRINCIPAL - Endpoint de Orquestra√ß√£o**

```http
üöÄ GET /api/ordens-servico/{id}/detalhado
```

**üí° Este √© o ENDPOINT PRINCIPAL da Feature 3** que demonstra:

1. **üîÑ Orquestra√ß√£o de Microsservi√ßos**: Combina dados de m√∫ltiplas fontes
2. **üåê Feign Clients**: Comunica√ß√£o com APIs externas (AwesomeCep + OpenRoute)  
3. **üìä Response Enrichment**: Enriquece o response com dados geogr√°ficos em tempo real
4. **üõ°Ô∏è Resili√™ncia**: Fallback autom√°tico com algoritmo Haversine
5. **‚öôÔ∏è Configura√ß√£o Externa**: URLs e API Keys em `application.properties`

**üéØ Diferen√ßa T√©cnica:**
- **Endpoint b√°sico**: Retorna apenas dados do banco H2 local
- **Endpoint detalhado**: **Orquestra chamadas para 2 APIs externas** e retorna dados integrados

```http
# üß™ Endpoints de Teste Individual das APIs
GET /api/distancia/consulta/{cepOrigem}/{cepDestino}  # Teste isolado de dist√¢ncia
GET /api/distancia/teste-awesome/{cep}                # Teste API AwesomeCep  
GET /api/distancia/teste-openroute                   # Teste API OpenRoute
```

> **üöÄ Diferencial**: O endpoint `/detalhado` demonstra **orquestra√ß√£o completa** chamando 2 APIs externas via Feign Clients e enriquecendo o response com dados geogr√°ficos em tempo real.

---

## üõ†Ô∏è **Tecnologias Utilizadas**

### Core Framework
- **Spring Boot 3.2.5**
- **Spring Data JPA**
- **Spring Web MVC**
- **Spring Cloud OpenFeign**

### Persist√™ncia
- **H2 Database** (desenvolvimento)
- **Hibernate/JPA**
- **Query Methods**

### Arquitetura
- **Maven Multi-m√≥dulo**
- **RESTful APIs**
- **Inje√ß√£o de Depend√™ncia**
- **Configura√ß√£o Externa**

---

## üöÄ **Como Executar**

### Pr√©-requisitos
- Java 21+
- Maven 3.8+

### Execu√ß√£o
```bash
# 1. Clone o reposit√≥rio
git clone <repository-url>
cd cochito-parent

# 2. Compile o projeto
mvn clean compile

# 3. Execute a aplica√ß√£o principal
cd main-app
mvn spring-boot:run

# 4. Acesse a aplica√ß√£o
http://localhost:8080
```

### Banco de Dados H2
- **URL**: http://localhost:8080/h2-console
- **JDBC URL**: `jdbc:h2:~/databasecochito`
- **User**: `sa`
- **Password**: *(vazio)*

---

## üìä **Dados de Demonstra√ß√£o**

O sistema carrega automaticamente dados realistas simulando uma **empresa de servi√ßos domiciliares**:

### üè† **Servi√ßos de Visita Domiciliar**
- Instala√ß√£o de Ar Condicionado (R$ 350,00)
- Reparo de Eletrodom√©sticos (R$ 180,00)
- Instala√ß√£o de Internet (R$ 120,00)
- Manuten√ß√£o de Piscina (R$ 250,00)
- Instala√ß√£o de C√¢meras de Seguran√ßa (R$ 400,00)

### üìã **27 Ordens de Servi√ßo**
- **8 PENDENTE** | **8 CONCLUIDO** | **3 EM_ANDAMENTO** | **6 CANCELADO**
- Distribu√≠das entre **jul/2025 - dez/2025**
- **3 Funcion√°rios** e **3 Clientes** em Uberaba/MG

---

## üîç **Endpoints Principais**

### üîê **Autentica√ß√£o (P√∫blico)**
```http
POST   /api/auth/login                        # Login JWT (p√∫blico)
GET    /                                      # Info da API (p√∫blico)
```

### üìö **Documenta√ß√£o (P√∫blico)**
```http
GET    /swagger-ui.html                       # Swagger UI (p√∫blico)
GET    /v3/api-docs                          # OpenAPI JSON (p√∫blico)
GET    /h2-console                           # Console H2 (p√∫blico)
```

### üè† **Ordens de Servi√ßo (Protegido)**
```http
# CRUD B√°sico (Feature 4 - DTOs + Seguran√ßa)
GET    /api/ordens-servico                    # Listar todas [USER/ADMIN]
GET    /api/ordens-servico/{id}               # Buscar por ID [USER/ADMIN]
POST   /api/ordens-servico                    # Criar nova [ADMIN]
PUT    /api/ordens-servico/{id}               # Atualizar [ADMIN]
DELETE /api/ordens-servico/{id}               # Remover [ADMIN]

# üéØ Feature 3 - Orquestra√ß√£o de Microsservi√ßos
GET /api/ordens-servico/{id}/detalhado        # üèÜ ENDPOINT PRINCIPAL COM ORQUESTRA√á√ÉO [USER/ADMIN]
# ‚Ü≥ Retorna ordem + dados de dist√¢ncia via Feign Clients (AwesomeCep + OpenRoute)
# ‚Ü≥ DEMONSTRA: Orquestra√ß√£o + Resili√™ncia + Response Enrichment

# üéØ Feature 4 - Query Methods Avan√ßados
GET /api/ordens-servico/status/{status}                    # Por status [USER/ADMIN]
GET /api/ordens-servico/pendentes?inicio=X&fim=Y          # Pendentes por per√≠odo [USER/ADMIN]
GET /api/ordens-servico/periodo?inicio=X&fim=Y            # Por per√≠odo [USER/ADMIN]
GET /api/ordens-servico/cliente?nome={nome}               # Por nome do cliente [USER/ADMIN]
GET /api/ordens-servico/cpf/{cpf}                         # Por CPF do cliente [USER/ADMIN]
GET /api/ordens-servico/servico?titulo={titulo}           # Por t√≠tulo do servi√ßo [USER/ADMIN]
GET /api/ordens-servico/status/{status}/count             # Contar por status [USER/ADMIN]
```

### üë• **Clientes (Feature 4 - DTOs)**
```http
GET    /api/clientes                          # Listar todos [USER/ADMIN]
GET    /api/clientes/{id}                     # Buscar por ID [USER/ADMIN]
POST   /api/clientes                          # Criar novo [ADMIN]
PUT    /api/clientes/{id}                     # Atualizar [ADMIN]
DELETE /api/clientes/{id}                     # Remover [ADMIN]
PATCH  /api/clientes/{id}/fidelidade          # Atualizar fidelidade [ADMIN]
```

### üîß **Servi√ßos (Feature 4 - DTOs)**
```http
GET    /api/servicos                          # Listar todos [USER/ADMIN]
GET    /api/servicos/{id}                     # Buscar por ID [USER/ADMIN]
POST   /api/servicos                          # Criar novo [ADMIN]
PUT    /api/servicos/{id}                     # Atualizar [ADMIN]
DELETE /api/servicos/{id}                     # Remover [ADMIN]
```

### üë®‚Äçüíº **Funcion√°rios (Feature 4 - DTOs)**
```http
GET    /api/funcionarios                      # Listar todos [USER/ADMIN]
GET    /api/funcionarios/{id}                 # Buscar por ID [USER/ADMIN]
POST   /api/funcionarios                      # Criar novo [ADMIN]
PUT    /api/funcionarios/{id}                 # Atualizar [ADMIN]
DELETE /api/funcionarios/{id}                 # Remover [ADMIN]
```

### üìç **Dist√¢ncia (Feature 3 - Testes)**
```http
GET /api/distancia/consulta/{cepOrigem}/{cepDestino}      # Calcular dist√¢ncia [USER/ADMIN]
```

**Legenda:**
- `[USER/ADMIN]` - Requer autentica√ß√£o JWT com role USER ou ADMIN
- `[ADMIN]` - Requer autentica√ß√£o JWT com role ADMIN
- `(p√∫blico)` - Sem autentica√ß√£o necess√°ria

---

## üìà **Exemplos de Uso**

### 0. **üîê Autentica√ß√£o JWT (OBRIGAT√ìRIO)**
```bash
# 1. Fazer login para obter token JWT
curl -X POST "http://localhost:8080/api/auth/login" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "joao.silva@email.com",
    "password": "admin123"
  }'

# Response:
{
  "success": true,
  "message": "Login realizado com sucesso",
  "token": "eyJhbGciOiJIUzI1NiJ9...",
  "userInfo": {
    "id": 1,
    "nome": "Jo√£o Silva",
    "email": "joao.silva@email.com",
    "tipo": "Funcionario",
    "roles": ["ADMIN"]
  }
}

# 2. Usar o token nas pr√≥ximas requisi√ß√µes
export TOKEN="eyJhbGciOiJIUzI1NiJ9..."
```

### 1. **üéØ üöÄ Feature 3 - Consultar Ordem Detalhada com Orquestra√ß√£o** 
```bash
# üèÜ ENDPOINT PRINCIPAL DA FEATURE 3 - COM orquestra√ß√£o de APIs externas
curl -X GET "http://localhost:8080/api/ordens-servico/4/detalhado" \
  -H "Authorization: Bearer $TOKEN"
# ‚Ü≥ RETORNA: Ordem completa + objeto dist√¢ncia com dados de 2 APIs externas

# üîç Compara√ß√£o: Endpoint b√°sico SEM dados de dist√¢ncia detalhados
curl -X GET "http://localhost:8080/api/ordens-servico/4" \
  -H "Authorization: Bearer $TOKEN"
# ‚Ü≥ RETORNA: Ordem b√°sica + dist√¢ncia como string simples ("6.58 km")
```

**üéØ Diferen√ßa no Response:**
- **B√°sico**: `"distancia": "6.58 km"` (string simples)
- **Detalhado**: `"distancia": { "cepOrigem": "...", "distanciaKm": 6.58, ... }` (objeto completo)

### 2. **üéØ Feature 4 - Query Methods com DTOs**
```bash
# Buscar ordens pendentes por per√≠odo
curl -X GET "http://localhost:8080/api/ordens-servico/pendentes?inicio=2025-08-01T00:00:00&fim=2025-09-30T23:59:59" \
  -H "Authorization: Bearer $TOKEN"

# Buscar ordens por status
curl -X GET "http://localhost:8080/api/ordens-servico/status/CONCLUIDO" \
  -H "Authorization: Bearer $TOKEN"

# Buscar ordens por nome do cliente
curl -X GET "http://localhost:8080/api/ordens-servico/cliente?nome=Ana" \
  -H "Authorization: Bearer $TOKEN"
```

### 3. **üéØ Feature 4 - CRUD com DTOs**
```bash
# Criar novo cliente (apenas ADMIN)
curl -X POST "http://localhost:8080/api/clientes" \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "nome": "Carlos Silva",
    "email": "carlos@email.com",
    "cpf": "123.456.789-00",
    "telefone": "(11) 99999-9999",
    "fidelidade": "BRONZE",
    "endereco": {
      "cep": "38020-433",
      "logradouro": "Rua Nova, 123",
      "bairro": "Centro",
      "localidade": "Uberaba",
      "uf": "MG",
      "estado": "Minas Gerais"
    }
  }'

# Listar clientes (USER/ADMIN)
curl -X GET "http://localhost:8080/api/clientes" \
  -H "Authorization: Bearer $TOKEN"
```

### 4. **üß™ Calcular Dist√¢ncia Entre CEPs (Feature 3 - Teste Isolado)**
```bash
curl -X GET "http://localhost:8080/api/distancia/consulta/38081470/38067290" \
  -H "Authorization: Bearer $TOKEN"

# Response esperado:
{
    "cepOrigem": "38081470",
    "cepDestino": "38067290",
    "enderecoOrigem": "Avenida Francisco Jos√© de Carvalho",
    "bairroOrigem": "Parque do Mirante",
    "ufOrigem": "MG",
    "enderecoDestino": "Rua Rep√∫blica do Haiti",
    "bairroDestino": "Fabr√≠cio",
    "ufDestino": "MG",
    "distanciaKm": 6.58,
    "tempoMinutos": 10.57
}
```

---

## üéØ **Destaques das Features 3 e 4**

### ‚ú® **Pontos Fortes da Implementa√ß√£o**

#### **üéØ Feature 3 - Microsservi√ßos:**
1. **üèóÔ∏è Arquitetura Modular**: Separa√ß√£o clara de responsabilidades em 3 m√≥dulos
2. **üåê Feign Clients**: Implementa√ß√£o elegante de comunica√ß√£o HTTP
3. **üîÑ Orquestra√ß√£o**: Combina√ß√£o de m√∫ltiplas APIs em um √∫nico fluxo
4. **üõ°Ô∏è Resili√™ncia**: Fallback autom√°tico com algoritmo Haversine
5. **‚öôÔ∏è Configura√ß√£o Externa**: URLs e chaves de API externalizadas
6. **üìã Response Enrichment**: DTOs enriquecidos com dados de APIs externas

#### **üéØ Feature 4 - Seguran√ßa e Query Methods:**
7. **üîê Spring Security**: Autentica√ß√£o JWT stateless completa
8. **üë• Controle de Acesso**: Roles ADMIN/USER com @PreAuthorize
9. **üìä Query Methods**: 15+ consultas personalizadas com JPA
10. **üéØ DTOs Everywhere**: Zero exposi√ß√£o de entidades nos controllers
11. **‚úÖ Valida√ß√µes Robustas**: Bean Validation em todos os DTOs
12. **üìö Swagger P√∫blico**: Documenta√ß√£o interativa com exemplos
13. **üß™ Postman Collection**: Testes prontos e configurados

### üéñÔ∏è **Diferencial do Projeto**

O projeto **SUPERA os requisitos b√°sicos** das Features 3 e 4, implementando:

#### **üöÄ Funcionalidades Extras - Feature 3:**
- **Algoritmo Haversine** matem√°tico para c√°lculo de dist√¢ncia como fallback
- **M√∫ltiplos endpoints de teste** para valida√ß√£o individual das APIs
- **CEPs reais de Uberaba/MG** para testes aut√™nticos
- **Response Enrichment** com dados geogr√°ficos em tempo real

#### **üöÄ Funcionalidades Extras - Feature 4:**
- **Sistema completo de CRUD** com DTOs para todas as entidades
- **15+ Query Methods** avan√ßados com JPA para consultas espec√≠ficas
- **Swagger p√∫blico** com login pr√©-preenchido e documenta√ß√£o completa
- **Postman Collection** pronta com todos os endpoints testados
- **Controle granular de acesso** com roles diferenciadas por endpoint
- **Valida√ß√µes robustas** com mensagens personalizadas em portugu√™s

#### **üèóÔ∏è Arquitetura Robusta:**
- **3 m√≥dulos Maven** independentes com responsabilidades bem definidas
- **Inje√ß√£o de depend√™ncia** completa entre m√≥dulos
- **DTOs especializados** para request/response (zero exposi√ß√£o de entidades)
- **Spring Security** com JWT stateless e filtros customizados
- **Tratamento de exce√ß√µes** customizado por contexto
- **Configura√ß√£o externalizada** para diferentes ambientes

#### **üìä Cen√°rio Realista:**
- **Empresa de servi√ßos domiciliares** como contexto de neg√≥cio
- **27 ordens de servi√ßo** pr√©-carregadas com dados realistas
- **Sistema de autentica√ß√£o** com usu√°rios ADMIN e USER
- **C√°lculo de dist√¢ncia funcion√°rio ‚Üî cliente** para otimiza√ß√£o de rotas
- **Documenta√ß√£o t√©cnica completa** com exemplos pr√°ticos de uso

---

## üèÜ **Conclus√£o - Features 3 e 4 Completamente Implementadas**

Este projeto demonstra **dom√≠nio t√©cnico completo** dos conceitos avan√ßados das Features 3 e 4:

### ‚úÖ **Compet√™ncias Demonstradas - Feature 3:**
1. **üèóÔ∏è Arquitetura de Microsservi√ßos**: Modulariza√ß√£o em 3 componentes independentes
2. **üåê Spring Cloud OpenFeign**: Comunica√ß√£o elegante entre servi√ßos via HTTP
3. **üîÑ Orquestra√ß√£o de Servi√ßos**: Combina√ß√£o inteligente de m√∫ltiplas APIs externas
4. **üõ°Ô∏è Resili√™ncia e Fallback**: Algoritmos alternativos para alta disponibilidade  
5. **‚öôÔ∏è Configura√ß√£o Externa**: Externalization para diferentes ambientes
6. **üìä Response Enrichment**: DTOs enriquecidos com dados de APIs externas

### ‚úÖ **Compet√™ncias Demonstradas - Feature 4:**
7. **üîê Spring Security**: Autentica√ß√£o JWT stateless com filtros customizados
8. **üë• Controle de Acesso**: Roles granulares com @PreAuthorize por endpoint
9. **üìä Query Methods**: 15+ consultas personalizadas com JPA Repository
10. **üéØ DTOs Everywhere**: Zero exposi√ß√£o de entidades nos controllers
11. **‚úÖ Valida√ß√µes Robustas**: Bean Validation com mensagens personalizadas
12. **üìö Documenta√ß√£o Completa**: Swagger p√∫blico + Postman Collection
13. **üîç Tratamento de Erros**: GlobalExceptionHandler com responses padronizados

### üéØ **Resultado Final:**
**Sistema enterprise completo** que vai al√©m dos requisitos b√°sicos, implementando uma solu√ß√£o robusta e profissional para gerenciamento de ordens de servi√ßo com:
- **üéØ Feature 3**: Orquestra√ß√£o de microsservi√ßos em tempo real
- **üéØ Feature 4**: Seguran√ßa JWT + Query Methods + DTOs

### üöÄ **Pronto para Produ√ß√£o:**
- **Arquitetura escal√°vel** e manuten√≠vel
- **Seguran√ßa enterprise** com JWT e controle de acesso
- **C√≥digo limpo** seguindo boas pr√°ticas
- **Documenta√ß√£o completa** (Swagger + Postman + README)
- **Testes funcionais** via endpoints
- **Cen√°rio de neg√≥cio** realista e aplic√°vel

---

## üìã **GUIA DE VALIDA√á√ÉO - Features 3 e 4**

### **üéØ Prepara√ß√£o da Aplica√ß√£o para Avalia√ß√£o**

#### **1. Pr√©-requisitos T√©cnicos:**
```bash
# Verificar vers√µes (obrigat√≥rias)
java -version    # Java 21+ obrigat√≥rio
mvn -version     # Maven 3.8+ obrigat√≥rio
```

#### **2. Compila√ß√£o e Execu√ß√£o:**
```bash
# 1. Navegar para o diret√≥rio do projeto
cd cochito-parent

# 2. Compilar todos os m√≥dulos
mvn clean compile

# 3. Navegar para o m√≥dulo principal
cd main-app

# 4. Executar a aplica√ß√£o
mvn spring-boot:run

# 5. Aguardar inicializa√ß√£o completa (log: "Started MainAppApplication")
```

#### **3. Verifica√ß√£o de Funcionalidade (Seeds):**
```bash
# Verificar carregamento de dados no console:
# ‚úÖ "10 servi√ßos carregados"
# ‚úÖ "3 clientes carregados" 
# ‚úÖ "3 funcion√°rios carregados"
# ‚úÖ "27 ordens de servi√ßo carregadas"
```

---

## üß™ **TESTES DE VALIDA√á√ÉO DAS FEATURES 3 E 4**

### **üîê TESTE 0: Autentica√ß√£o JWT (OBRIGAT√ìRIO - Feature 4)**
```bash
# Login ADMIN (acesso total)
curl -X POST "http://localhost:8080/api/auth/login" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "joao.silva@email.com",
    "password": "admin123"
  }'

# Login USER (apenas leitura)
curl -X POST "http://localhost:8080/api/auth/login" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "ana.oliveira@email.com",
    "password": "cliente123"
  }'
```

**‚úÖ Response Esperado:**
```json
{
  "success": true,
  "message": "Login realizado com sucesso",
  "token": "eyJhbGciOiJIUzI1NiJ9...",
  "userInfo": {
    "id": 1,
    "nome": "Jo√£o Silva",
    "roles": ["ADMIN"]
  }
}
```

### **üéØ TESTE 1: DTOs e Valida√ß√µes (Feature 4)**
```bash
# Usar token obtido no teste anterior
export TOKEN="eyJhbGciOiJIUzI1NiJ9..."

# Testar endpoint com DTO (n√£o retorna entidade diretamente)
curl -X GET "http://localhost:8080/api/clientes" \
  -H "Authorization: Bearer $TOKEN"

# Testar valida√ß√µes (deve retornar erro 400)
curl -X POST "http://localhost:8080/api/clientes" \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "nome": "",
    "email": "email-inv√°lido",
    "cpf": "123"
  }'
```

### **üéØ TESTE 2: Query Methods Avan√ßados (Feature 4)**
```bash
# Query Methods personalizados
curl -X GET "http://localhost:8080/api/ordens-servico/status/PENDENTE" \
  -H "Authorization: Bearer $TOKEN"

curl -X GET "http://localhost:8080/api/ordens-servico/cliente?nome=Ana" \
  -H "Authorization: Bearer $TOKEN"

curl -X GET "http://localhost:8080/api/ordens-servico/status/CONCLUIDO/count" \
  -H "Authorization: Bearer $TOKEN"
```

### **üéØ TESTE 3: Controle de Acesso (Feature 4)**
```bash
# Testar com token USER (deve funcionar - GET permitido)
curl -X GET "http://localhost:8080/api/ordens-servico" \
  -H "Authorization: Bearer $TOKEN_USER"

# Testar com token USER (deve retornar 403 - POST negado)
curl -X POST "http://localhost:8080/api/ordens-servico" \
  -H "Authorization: Bearer $TOKEN_USER" \
  -H "Content-Type: application/json" \
  -d '{...}'
```

## üß™ **TESTES DE VALIDA√á√ÉO DA FEATURE 3**

### **üöÄ TESTE 4: Orquestra√ß√£o Principal (OBRIGAT√ìRIO - Feature 3)**
```bash
# ENDPOINT PRINCIPAL DA FEATURE 3 - Orquestra√ß√£o Completa
curl -X GET "http://localhost:8080/api/ordens-servico/4/detalhado" \
  -H "Authorization: Bearer $TOKEN"
```

**‚úÖ Response Esperado:**
```json
{
    "id": 4,
    "funcionario": { "nome": "...", "endereco": {"cep": "..."} },
    "cliente": { "nome": "...", "endereco": {"cep": "..."} },
    "itensServicos": [...],
    "status": "PENDENTE",
    "distancia": {
        "cepOrigem": "38081470",
        "cepDestino": "38067290",
        "enderecoOrigem": "Avenida Francisco Jos√© de Carvalho",
        "bairroOrigem": "Parque do Mirante", 
        "ufOrigem": "MG",
        "enderecoDestino": "Rua Rep√∫blica do Haiti",
        "bairroDestino": "Fabr√≠cio",
        "ufDestino": "MG",
        "distanciaKm": 6.58,
        "tempoMinutos": 10.57
    }
}
```

### **üîç TESTE 5: Compara√ß√£o CRUD vs Orquestra√ß√£o (Feature 3)**
```bash
# Endpoint B√ÅSICO (sem orquestra√ß√£o)
curl -X GET "http://localhost:8080/api/ordens-servico/4" \
  -H "Authorization: Bearer $TOKEN"

# vs.

# Endpoint DETALHADO (com orquestra√ß√£o Feature 3)
curl -X GET "http://localhost:8080/api/ordens-servico/4/detalhado" \
  -H "Authorization: Bearer $TOKEN"
```

**üéØ Diferen√ßa Cr√≠tica:**
- **B√ÅSICO**: `"distancia": "6.58 km"` (string simples)
- **DETALHADO**: Objeto completo com 10 campos de 2 APIs externas

### **üåê TESTE 6: Feign Clients Individuais (Feature 3)**
```bash
# 3. Testar orquestra√ß√£o completa isolada
curl -X GET "http://localhost:8080/api/distancia/consulta/38081470/38067290" \
  -H "Authorization: Bearer $TOKEN"
```

### **üõ°Ô∏è TESTE 7: Resili√™ncia e Fallback (Feature 3)**
```bash
# Testar com CEPs inv√°lidos para verificar fallback Haversine
curl -X GET "http://localhost:8080/api/distancia/consulta/00000000/11111111" \
  -H "Authorization: Bearer $TOKEN"
```

**‚úÖ Comportamento Esperado:**
- Fallback autom√°tico para algoritmo Haversine
- Response com dist√¢ncia calculada matematicamente
- Logs de erro controlados (n√£o quebra a aplica√ß√£o)

### **üìä TESTE 8: Query Methods (Feature 4 + Feature 3)**
```bash
# Ordens pendentes por per√≠odo (Feature 4 + Feature 3)
curl -X GET "http://localhost:8080/api/ordens-servico/pendentes?inicio=2025-08-01T00:00:00&fim=2025-12-31T23:59:59" \
  -H "Authorization: Bearer $TOKEN"

# Ordens por status
curl -X GET "http://localhost:8080/api/ordens-servico/status/CONCLUIDO" \
  -H "Authorization: Bearer $TOKEN"
```

---

## üéØ **CHECKLIST DE VALIDA√á√ÉO T√âCNICA**

### **‚úÖ Feature 3 - Arquitetura de Microsservi√ßos:**
- [ ] **3 m√≥dulos Maven** independentes vis√≠veis na estrutura
- [ ] **Separa√ß√£o de responsabilidades** clara entre m√≥dulos
- [ ] **Inje√ß√£o de depend√™ncia** funcionando entre m√≥dulos

### **‚úÖ Feature 3 - Spring Cloud OpenFeign:**
- [ ] **AwesomeCepFeignClient** funcionando (consulta CEP)
- [ ] **OpenRouteFeignClient** funcionando (c√°lculo rota)  
- [ ] **Configura√ß√£o @FeignClient** correta nos c√≥digos

### **‚úÖ Feature 3 - Orquestra√ß√£o de Servi√ßos:**
- [ ] **DistanciaService** orquestra 2 APIs em sequ√™ncia
- [ ] **Response enriquecido** com dados de m√∫ltiplas fontes
- [ ] **Endpoint /detalhado** retorna dados combinados

### **‚úÖ Feature 3 - Resili√™ncia e Fallback:**
- [ ] **Algoritmo Haversine** ativa em caso de falha
- [ ] **Try/catch** adequados nos Feign Clients
- [ ] **Aplica√ß√£o n√£o quebra** com APIs indispon√≠veis

### **‚úÖ Feature 3 - Configura√ß√£o Externa:**
- [ ] **URLs das APIs** em `application.properties`
- [ ] **API Keys** externalizadas (configur√°veis)
- [ ] **Profiles** prontos para diferentes ambientes

### **‚úÖ Feature 4 - Spring Security + JWT:**
- [ ] **Autentica√ß√£o JWT** funcionando (login retorna token)
- [ ] **Filtro JWT** intercepta requisi√ß√µes protegidas
- [ ] **Roles ADMIN/USER** diferenciadas por endpoint
- [ ] **@PreAuthorize** configurado nos controllers

### **‚úÖ Feature 4 - Query Methods:**
- [ ] **15+ Query Methods** personalizados funcionando
- [ ] **Consultas por status, cliente, per√≠odo** retornando dados
- [ ] **@Query customizadas** com JPQL funcionando
- [ ] **Count methods** retornando n√∫meros corretos

### **‚úÖ Feature 4 - DTOs (Sem Exposi√ß√£o de Entidades):**
- [ ] **Controllers n√£o retornam entidades** diretamente
- [ ] **DTOs Request/Response** em todos os endpoints
- [ ] **Valida√ß√µes Bean Validation** funcionando
- [ ] **Mensagens de erro** personalizadas em portugu√™s

### **‚úÖ Feature 4 - Swagger + Documenta√ß√£o:**
- [ ] **Swagger UI p√∫blico** acess√≠vel sem autentica√ß√£o
- [ ] **Login pr√©-preenchido** com credenciais de teste
- [ ] **Controllers organizados** por tags numeradas
- [ ] **Postman Collection** import√°vel e funcional

---

## üèÜ **CRIT√âRIOS DE APROVA√á√ÉO**

### **üéØ Funcionalidades OBRIGAT√ìRIAS - Feature 3:**
1. ‚úÖ **Endpoint /detalhado** retorna objeto dist√¢ncia completo
2. ‚úÖ **2 Feign Clients** funcionando individualmente  
3. ‚úÖ **Orquestra√ß√£o** combina dados de APIs externas
4. ‚úÖ **Fallback** funciona com dados inv√°lidos
5. ‚úÖ **M√≥dulos independentes** compilam separadamente

### **üéØ Funcionalidades OBRIGAT√ìRIAS - Feature 4:**
6. ‚úÖ **Autentica√ß√£o JWT** com login funcionando
7. ‚úÖ **Controle de acesso** ADMIN/USER por endpoint
8. ‚úÖ **Query Methods** personalizados funcionando
9. ‚úÖ **DTOs** em todos os controllers (zero entidades expostas)
10. ‚úÖ **Valida√ß√µes** Bean Validation funcionando

### **üöÄ Pontos EXTRAS (Diferenciais):**
11. ‚úÖ **Swagger p√∫blico** com login pr√©-preenchido
12. ‚úÖ **Postman Collection** completa e testada
13. ‚úÖ **27 ordens** pr√©-carregadas com dados realistas
14. ‚úÖ **Algoritmo Haversine** matem√°tico implementado
15. ‚úÖ **Documenta√ß√£o t√©cnica** completa e profissional

---

## üß™ **Quick Start - Teste R√°pido (60 segundos)**

```bash
# 1. Execute (aguarde "Started MainAppApplication")
cd main-app && mvn spring-boot:run

# 2. Fa√ßa login para obter token JWT (Feature 4)
curl -X POST "http://localhost:8080/api/auth/login" \
  -H "Content-Type: application/json" \
  -d '{"email": "joao.silva@email.com", "password": "admin123"}'

# 3. Copie o token e teste PRINCIPAL da Feature 3
export TOKEN="SEU_TOKEN_AQUI"
curl -X GET "http://localhost:8080/api/ordens-servico/4/detalhado" \
  -H "Authorization: Bearer $TOKEN"

# 4. Teste Query Method da Feature 4
curl -X GET "http://localhost:8080/api/ordens-servico/status/PENDENTE" \
  -H "Authorization: Bearer $TOKEN"

# ‚úÖ SUCESSO: Features 3 e 4 implementadas corretamente!
```

### **üåê Acesso R√°pido:**
- **Swagger UI**: http://localhost:8080/swagger-ui.html
- **Postman Collection**: [Link da Collection](https://api.postman.com/collections/33558167-802ea8c2-aeea-42c5-bcd2-81c4329b7c7b?access_key=PMAT-01K3Q35BC53066TFP2V3VFJRXT)

---

## üë®‚Äçüíª **Desenvolvedor**

**Projeto desenvolvido para demonstrar compet√™ncias completas em Arquiteturas Avan√ßadas de Software - Features 3 e 4.**

### üìß **Contato para D√∫vidas T√©cnicas**
Este projeto implementa todos os requisitos das Features 3 e 4 e est√° pronto para avalia√ß√£o t√©cnica detalhada.

### üéØ **Features Implementadas:**
- ‚úÖ **Feature 3**: Microsservi√ßos + Spring Cloud OpenFeign + Orquestra√ß√£o
- ‚úÖ **Feature 4**: Spring Security + JWT + Query Methods + DTOs

---

*üìã README t√©cnico completo documentando a implementa√ß√£o integral das Features 3 e 4 - Arquiteturas Avan√ßadas de Software com Microsservi√ßos, Spring Framework e Spring Security.*
